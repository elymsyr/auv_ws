export CUDA_HOME=/usr/local/cuda-11.8
export PATH=/usr/local/cuda-11.8/bin:$PATH
export LD_LIBRARY_PATH=/usr/local/cuda-11.8/lib64:$LD_LIBRARY_PATH
nvcc --version
export CMAKE_PREFIX_PATH=$CMAKE_PREFIX_PATH:/home/elymsyr/GitHub/auv_ws/libtorch
source /opt/ros/humble/setup.bash
cd ~/GitHub/auv_ws
rm -rf build install log
chmod +x src/gazebo_sim/scripts/*.py src/gazebo_sim/launch/*.py 
chmod +r src/gazebo_sim/config/config.json

-----------------------------------------------------------------------------------------------

cd ~/GitHub/auv_ws
rm -rf build install log
colcon build --cmake-clean-cache --symlink-install \
  --cmake-args "-DCMAKE_PREFIX_PATH=$(pwd)/libtorch"
source install/setup.bash

-----------------------------------------------------------------------------------------------

source install/setup.bash
ros2 launch auv_control sim_with_control.launch.py

-----------------------------------------------------------------------------------------------

source install/setup.bash
ros2 lifecycle set /auv_orchestrator configure
ros2 lifecycle set /auv_orchestrator activate

-----------------------------------------------------------------------------------------------

source install/setup.bash
ros2 topic echo /environment_state

-----------------------------------------------------------------------------------------------

source install/setup.bash
ros2 service call /mission/set auv_control/srv/SetMission "{mission_type: 0}"
ros2 service call /mission/start auv_control/srv/Trigger "{}"

-----------------------------------------------------------------------------------------------

echo "---- ros2 node list ----"
ros2 node list
echo "---- ros2 topic list -t ----"
ros2 topic list -t
echo "---- ros2 service list -t ----"
ros2 service list -t
echo "---- ros2 action list -t ----"
ros2 action list -t
